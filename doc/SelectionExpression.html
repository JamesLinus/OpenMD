<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>Selection syntax for OOPSE utility programs</title>
</head>
<body style="background-color: white;">
<basefont size="3">
<div align="center">
<p><font size="+2"><b>Selection syntax for OOPSE utility programs</b></font><span
 style="font-weight: bold;"></span><br>
</p>
<h2 align="left"><a name="introduction" id="introduction"> Introduction
</a></h2>
<p style="text-align: left;">The OOPSE utility programs compute
properties from the <span
 style="font-family: monospace; font-weight: bold;">dump</span><span
 style="font-weight: bold;">
</span>files that are generated during a molecular dynamics
simulation.&nbsp;
These programs are:<br>
</p>
<ul style="text-align: left;">
  <li><span style="font-family: monospace; font-weight: bold;">Dump2XYZ</span><span
 style="font-weight: bold;"> </span>- Converts an OOPSE dump file into
a file suitable
for viewing in a molecular dynamics viewer like <a
 href="http://www.jmol.org">Jmol</a><br>
  </li>
  <li><span style="font-family: monospace; font-weight: bold;">StaticProps</span><span
 style="font-weight: bold;"> </span>- Computes static properties like
the pair distribution function, <span style="font-style: italic;">g(r)</span>.<br>
  </li>
  <li><span style="font-family: monospace; font-weight: bold;">DynamicProps</span><span
 style="font-weight: bold;"> </span>- Computes time correlation
functions like the
velocity autocorrelation function, <span style="font-style: italic;">&lt;<span
 style="font-weight: bold;">v</span>(t)<span style="font-weight: bold;">v</span>(0)&gt;</span>,
or the mean square displacement <span style="font-style: italic;">&lt;|<span
 style="font-weight: bold;">r</span>(t) - <span
 style="font-weight: bold;">r</span>(0)|<sup>2</sup>&gt;.</span></li>
</ul>
<div style="text-align: left;">These programs often need to operate on
a subset of the data contained within a dump file.&nbsp; For example,
if you want only the <span style="font-style: italic;">oxygen-oxygen</span>
pair distribution from a water simulation, or if you want to make a
movie including only the water molecules within a 6 angstrom radius of
lipid head groups, you need a way to specify your selection to these
utility programs.&nbsp;&nbsp; OOPSE has a selection syntax which allows
you to specify the selection in a compact form in order to generate
only the data you want.&nbsp; For example a common use of the
StaticProps command would be:<br>
<br>
<div style="margin-left: 80px;"><span
 style="font-family: monospace; font-weight: bold;">StaticProps -i
tp4.dump --gofr --sele1="select O*" --sele2="select O*"</span><br>
</div>
<br>
This command computes the oxygen-oxygen pair distribution function, <span
 style="font-style: italic;">g<sub>OO</sub>(r)</span>, from a file
named <span style="font-family: monospace;">tp4.dump</span>.&nbsp; In
order to understand this selection syntax and to make full use of the
selection capabilities of the analysis programs, it is necessary to
understand a few of the core concepts that are used to perform
simulations.<br>
<h2><a name="Concepts"></a>Concepts</h2>
OOPSE manipulates both traditional atoms as well as some objects that <span
 style="font-style: italic;">behave like atoms</span>.&nbsp; These
objects can be rigid collections of atoms or atoms which have
orientational degrees of freedom.&nbsp; Here is a diagram of the class
heirarchy:<br>
<span style="font-style: italic;"></span></div>
<p align="center"><img src="classoopse_1_1StuntDouble.png" height="136"
 width="292"><br>
</p>
<ul style="text-align: left;">
  <li>A <span style="font-family: monospace; font-weight: bold;">StuntDouble</span>
is <span style="font-style: italic;">any</span> object that can be
manipulated by the integrators and minimizers.</li>
  <li>An <span style="font-family: monospace; font-weight: bold;">Atom</span>
is a fundamental point-particle that can be moved around during a
simulation.</li>
  <li>A <span style="font-family: monospace; font-weight: bold;">DirectionalAtom</span>
is an atom which has <span style="font-style: italic;">orientational</span>
as well as translational degrees of freedom.</li>
  <li>A <span style="font-family: monospace; font-weight: bold;">RigidBody</span>
is a collection of <span
 style="font-family: monospace; font-weight: bold;">Atom</span>s or <span
 style="font-family: monospace; font-weight: bold;">DirectionalAtom</span>s
which behaves as a <span style="font-style: italic;">single unit.</span></li>
</ul>
<p align="left"> Every Molecule, Atom and DirectionalAtom in OOPSE
have their own names which are specified in the <span
 style="font-family: monospace; font-weight: bold;">.md</span> file. In
contrast, RigidBodies are denoted by their membership and index inside
a particular molecule: <span style="font-family: monospace;">[MoleculeName]_RB_[index]</span>
(the contents inside
the brackets depend on the specifics of the simulation). The names of
rigid bodies are generated automatically. For
example, the name of the first rigid body in a DMPC molecule is
DMPC_RB_0.<br>
</p>
</div>
<h2><a name="select"></a>Syntax of the Select Command</h2>
The most general form of the select command is: <b>select <i>expression</i>
</b>
<p>This expression represents an arbitrary set of StuntDoubles (Atoms
or
RigidBodies) in OOPSE. Expressions are composed of either name
expressions, index expression, predefined sets, user-defined
expression,
comparison operators, within expressions, or logical combinations of
the above expression types. Expression can be combined using
parentheses
and the Boolean operators</p>
<p><b><a name="logic"></a> Logical expression. </b> </p>
<p>The logical operators allow complex queries to be constructed out of
simpler ones using the standard boolean connectives <b>and, or, not</b>.
Parentheses can be used to alter the precedence of the operators.
</p>
<ul>
  <table bgcolor="#ffffff" border="1" cellpadding="5" width="441">
    <tbody>
      <tr bgcolor="#ffccff">
        <td width="174">
        <div align="left">logical operator </div>
        </td>
        <td width="241">
        <div align="left">equivalent operator</div>
        </td>
      </tr>
      <tr bgcolor="#ffccff">
        <td>
        <div align="left">and</div>
        </td>
        <td>
        <div align="left">"&amp;", "&amp;&amp;" </div>
        </td>
      </tr>
      <tr bgcolor="#ffccff">
        <td>
        <div align="left">or</div>
        </td>
        <td>
        <div align="left">"|", "||", "," </div>
        </td>
      </tr>
      <tr bgcolor="#ffccff">
        <td>
        <div align="left">not</div>
        </td>
        <td>
        <div align="left">"!"</div>
        </td>
      </tr>
    </tbody>
  </table>
  <p>&nbsp;</p>
</ul>
<p><a name="name"><b> Name expression.
</b></a> </p>
<ul>
  <table bgcolor="#ffffcc" border="1" bordercolor="#6b7683" width="886">
    <tbody>
      <tr>
        <td colspan="2">
        <div align="center">expression</div>
        </td>
        <td width="434">
        <div align="center">description</div>
        </td>
      </tr>
      <tr>
        <td rowspan="3" width="183">expression without "." </td>
        <td width="247">
        <div align="left">select DMPC</div>
        </td>
        <td>select all StuntDoubles belonging to all DMPC molecules </td>
      </tr>
      <tr>
        <td>
        <div align="left">select C*</div>
        </td>
        <td>select all atoms which have atom types beginning with C<br>
        </td>
      </tr>
      <tr>
        <td>
        <div align="left">select DMPC_RB_*</div>
        </td>
        <td>select all RigidBodies in DMPC molecules (only select
rigid-bodies, but not
include the atoms belong to them)</td>
      </tr>
      <tr>
        <td rowspan="3">expression has one "." </td>
        <td>select TIP3P.O_TIP3P</td>
        <td>select the O_TIP3P Atoms belong to TIP3P molecules </td>
      </tr>
      <tr>
        <td>select DMPC_RB_0.PO4</td>
        <td>select the PO4 Atoms belonging to first RigidBody in each
DMPC molecule<br>
        </td>
      </tr>
      <tr>
        <td>select DMPC.20</td>
        <td>select the 20th StuntDouble in each DMPC molecule<br>
        </td>
      </tr>
      <tr>
        <td>expression has two "."</td>
        <td>select DMPC.DMPC_RB_?.*</td>
        <td>select all Atoms belonging to all rigid-bodies within all
DMPC molecules</td>
      </tr>
    </tbody>
  </table>
  <p>&nbsp;</p>
</ul>
<p><a name="index" id="index"><b> Index expression </b></a></p>
<ul>
  <table bgcolor="#ffffff" border="1" cellpadding="5" width="894">
    <tbody>
      <tr bgcolor="#ffffcc">
        <td width="113">select 20 </td>
        <td width="520">select all of the StuntDoubles belonging to
Molecule 20</td>
      </tr>
      <tr bgcolor="#ffffcc">
        <td>select 20 to 30 </td>
        <td>select all of the StuntDoules belonging to molecules which
have global
indices between 20 (inclusive) and 30 (exclusive) </td>
      </tr>
    </tbody>
  </table>
</ul>
<p>&nbsp; </p>
<p><a name="predefine" id="predefine"><b> Predefined sets </b></a></p>
<ul>
  <table bgcolor="#ffffff" border="1" cellpadding="5" width="449">
    <tbody>
      <tr bgcolor="#ffccff">
        <td width="91">
        <div align="left">keyword</div>
        </td>
        <td width="332">
        <div align="left">description</div>
        </td>
      </tr>
      <tr bgcolor="#ffccff">
        <td>
        <div align="left">all</div>
        </td>
        <td>
        <div align="left">select all StuntDoubles</div>
        </td>
      </tr>
      <tr bgcolor="#ffccff">
        <td>
        <div align="left">none</div>
        </td>
        <td>
        <div align="left">select none of the StuntDoubles </div>
        </td>
      </tr>
    </tbody>
  </table>
</ul>
<p>&nbsp;</p>
<p><a name="user" id="user"><b> User defined expressions</b></a></p>
<p> Users can define arbitrary terms to represent groups of
StuntDoubles, and then use the define terms in select
commands. The general form for the define command is: <strong>define <em>term
expression</em></strong></p>
<p> Once defined, the user can specify such terms in boolean
expressions </p>
<ul>
  <table bgcolor="#ffffff" border="1" cellpadding="5" width="659">
    <tbody>
      <tr bgcolor="#ffffcc">
        <td>
        <p>define SSDWATER SSD or SSD1 or SSDRF</p>
        <p>select SSDWATER </p>
        </td>
      </tr>
    </tbody>
  </table>
</ul>
<p><a name="comparison" id="comparison"> <b>Comparison expression.</b></a></p>
<p>StuntDoubles can be selected by using comparision operators on
their properties. The general form for the comparison command is: a
property name, followed by a comparision operator and then a number.</p>
<ul>
  <table bgcolor="#ffffff" border="1" cellpadding="5" width="668">
    <tbody>
      <tr bgcolor="#ffccff">
        <td width="305">
        <div align="left">property</div>
        </td>
        <td width="331">
        <div align="left">mass, charge </div>
        </td>
      </tr>
      <tr bgcolor="#ffccff">
        <td>
        <div align="left">comparision operator</div>
        </td>
        <td>
        <div align="left">"&gt;", "&lt;", "=", "&gt;=", "&lt;=", "!=" </div>
        </td>
      </tr>
    </tbody>
  </table>
</ul>
<ul>
  <table bgcolor="#ffffff" border="1" cellpadding="5" width="672">
    <tbody>
      <tr bgcolor="#ffffcc">
        <td width="302">select mass &gt; 16.0 and charge &lt; -2 </td>
        <td width="338">select StuntDoubles which have mass greater
than
16.0 and charges less than -2 </td>
      </tr>
    </tbody>
  </table>
</ul>
<p>&nbsp;</p>
<p><b> <a name="within"></a> Within expression.</b>
</p>
<p> The "within" selection allows the user to select all StuntDoubles
within the specified
distance (in Angstroms) from a selection, including the selected atom
itself. The
general form for within selection is: <b>select within(<i>distance,
expression</i>) </b>
</p>
<ul>
  <table bgcolor="#ffffff" border="1" cellpadding="5" width="681">
    <tbody>
      <tr bgcolor="#ffffcc">
        <td width="306">select within(2.5, PO4 or NC4) </td>
        <td width="343">
        <blockquote>select all StuntDoubles which are within 2.5
angstroms of PO4 or NC4 atoms<br>
        </blockquote>
        </td>
      </tr>
    </tbody>
  </table>
</ul>
<p>
</p>
<h2><a name="syntax" id="syntax"> Tools which use the selection command
</a></h2>
<p><b><a name="within"></a> Dump2XYZ</b>
</p>
<p>Dump2XYZ can transform an OOPSE dump file into a xyz file which
could be opened by other molecular viewers, such as Jmol and VMD. </p>
<ul>
  <table bgcolor="#ffffff" border="1" cellpadding="5" width="890">
    <tbody>
      <tr bgcolor="#6699ff">
        <td width="191">
        <blockquote>
          <p>--selection</p>
        </blockquote>
        </td>
        <td width="667">Specifying --selection="selection command" with
Dump2XYZ, user can select an arbitrary set of stuntdoubles to be
converted. </td>
      </tr>
      <tr bgcolor="#ccff99">
        <td>
        <blockquote>
          <p>--originsele</p>
        </blockquote>
        </td>
        <td rowspan="2">In order to rotate the system, --originsele and
--refselec must be given to define the new coordinate set. A
stuntdouble with a dipole, which direction is always (0, 0, 1) in body
frame, is specified by --originsele. The new x-z plane is defined by
the direction of dipole and the StuntDouble is specified by --refsele. </td>
      </tr>
      <tr bgcolor="#ccff99">
        <td>
        <blockquote>
          <p>--refsele</p>
        </blockquote>
        </td>
      </tr>
    </tbody>
  </table>
</ul>
<p>
</p>
<p><b><a name="within"></a> StaticProps<br>
</b></p>
StaticProps can compute properties which are averaged over the
configurations that are contained within a dump file.&nbsp;&nbsp; The
most common example of a static property that can be computed is the
pair distribution function between atoms of type A and other atoms of
type B, <span style="font-style: italic;">g<sub>AB</sub>(r)</span>.&nbsp;
StaticProps can also be used to compute the density distributions of
other molecules in a reference frame <span style="font-style: italic;">fixed
to the body-fixed reference frame</span> of a selected atom or rigid
body.<b><br>
</b>
<p> </p>
<p align="center"><img src="definition.jpg" height="540" width="720"></p>
<p align="left">There are five seperate radial distribution functions
availiable in OOPSE. Since every radial distrbution function invlove
the calculation between a pair, --sele1 and --sele2 must be given.
</p>
<ul>
  <table bgcolor="#ffffff" border="1" cellpadding="5" width="890">
    <tbody>
      <tr bgcolor="#ccffcc">
        <td width="191">
        <blockquote>
          <p>option</p>
        </blockquote>
        </td>
        <td width="667">
        <blockquote>
          <div align="center">description</div>
        </blockquote>
        </td>
      </tr>
      <tr bgcolor="#ccffcc">
        <td>
        <blockquote>
          <p>--gofr</p>
        </blockquote>
        </td>
        <td>Computes the pair distribution function.</td>
      </tr>
      <tr bgcolor="#ccffcc">
        <td>
        <blockquote>
          <p>--r_theta</p>
        </blockquote>
        </td>
        <td>Computes the angle-dependent pair distribution function.
The
angle is defined by the intermolecular vector r and z-axis of
DirectionalAtom A.<br>
        </td>
      </tr>
      <tr bgcolor="#ccffcc">
        <td>
        <blockquote>
          <p>--r_omega</p>
        </blockquote>
        </td>
        <td>Computes an angle-dependent pair distribution function. The
angle is defined by the z-axes of the two DirectionalAtoms A and B.<br>
        </td>
      </tr>
      <tr bgcolor="#ccffcc">
        <td>
        <blockquote>
          <p>--theta_omega</p>
        </blockquote>
        </td>
        <td>Calculate the pair distribution of the two angles.</td>
      </tr>
      <tr bgcolor="#ccffcc">
        <td>
        <blockquote>
          <p>--gxyz</p>
        </blockquote>
        </td>
        <td>Calculate the density distribution of particles
of type B in the body frame of particle A. Therefore, --originsele and
--refsele must be given to define A's internal coordinate set. </td>
      </tr>
    </tbody>
  </table>
</ul>
<p>&nbsp; </p>
<p><b><a name="within"></a> DynamicProps<br>
<span style="font-weight: bold;"><br>
</span></b>DynamicProps computes time correlation functions from the
configurations stored in a dump file.&nbsp; Typical examples of time
correlation functions are the mean square displacement and the velocity
autocorrelation functions. <b><span style="font-weight: bold;"><br>
</span> </b></p>
<ul>
  <table bgcolor="#ffffff" border="1" cellpadding="5" width="890">
    <tbody>
      <tr bgcolor="#ccffcc">
        <td width="191">
        <p align="center">option</p>
        </td>
        <td width="667">
        <blockquote>
          <div align="center">description</div>
        </blockquote>
        </td>
      </tr>
      <tr bgcolor="#ccffcc">
        <td>
        <p align="center">--rcorr</p>
        </td>
        <td>mean square displacement </td>
      </tr>
      <tr bgcolor="#ccffcc">
        <td>
        <p align="center">--vcorr</p>
        </td>
        <td>velocity autocorrelation function</td>
      </tr>
      <tr bgcolor="#ccffcc">
        <td>
        <p align="center">--dcorr</p>
        </td>
        <td>dipole correlation function </td>
      </tr>
    </tbody>
  </table>
</ul>
<p>
</p>
</body>
</html>
